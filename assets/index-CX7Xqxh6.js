import{R as T,r as F,j as i}from"./iframe-FRnsl5h-.js";const b=T.createContext({values:{},setFieldValue:()=>{},errors:{},setFieldError:()=>{},touched:{},setFieldTouched:()=>{}}),j=({name:t,label:p,required:l,children:o})=>{const{values:g,setFieldValue:s,errors:c,setFieldError:d,touched:x,setFieldTouched:R}=F.useContext(b),n=g[t],a=c[t],f=x[t],h=()=>{l&&(n==null||n==="")?d(t,"该字段不能为空"):d(t,"")},r=m=>{let E;m&&typeof m=="object"&&"target"in m?E=m.target.value:E=m,s(t,E),a&&h()},e=()=>{R(t,!0),l&&h()},y=T.cloneElement(o,{value:n,onChange:r,onBlur:e}),u=()=>p?i.jsxs("label",{style:{display:"block",marginBottom:"8px",color:a&&f?"var(--error-color)":"var(--text-color)"},children:[p,l&&i.jsx("span",{style:{color:"var(--error-color)",marginLeft:"4px"},children:"*"})]}):null,v=()=>!f||!a?null:i.jsx("div",{style:{color:"var(--error-color)",fontSize:"12px",marginTop:"4px"},children:a});return i.jsxs("div",{style:{marginBottom:"16px"},children:[u(),y," ",v()]})};j.__docgenInfo={description:"",methods:[],displayName:"FormItem",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""}}};const w=({initialValues:t,onSubmit:p,children:l})=>{const[o,g]=F.useState(t||{}),[s,c]=F.useState({}),[d,x]=F.useState({}),R=(r,e)=>{g({...o,[r]:e}),s[r]&&c({...s,[r]:""})},n=(r,e)=>{c({...s,[r]:e})},a=(r,e)=>{x({...d,[r]:e})},f=(r,e)=>e==null||e===""?"该字段不能为空":"",h=r=>{r.preventDefault();const e={};let y=!1;if(Object.keys(o).forEach(u=>{const v=f(u,o[u]);v&&(e[u]=v,y=!0)}),y){c(e);return}p(o,r)};return i.jsx(b.Provider,{value:{values:o,setFieldValue:R,errors:s,setFieldError:n,touched:d,setFieldTouched:a},children:i.jsx("form",{onSubmit:h,children:l})})};w.__docgenInfo={description:"",methods:[],displayName:"Form",props:{initialValues:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(values: FormValues, event?: React.FormEvent) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},name:"values"},{type:{name:"ReactFormEvent",raw:"React.FormEvent"},name:"event"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{w as F,j as a,b};
