import{R as j,r as u,j as p}from"./iframe-BblueGYI.js";const q=j.createContext({values:{},setFieldValue:()=>{},errors:{},setFieldError:()=>{},touched:{},setFieldTouched:()=>{},registerField:()=>{},registerRequired:()=>{}}),S=({name:t,label:F,required:n,children:i})=>{const{values:g,setFieldValue:c,errors:m,setFieldError:f,touched:x,setFieldTouched:E,registerField:h,registerRequired:y}=u.useContext(q);u.useEffect(()=>{h(t),y(t,n||!1)},[t,n,h,y]);const d=g[t],l=m[t],R=x[t],v=()=>{n&&(d==null||d==="")?f(t,"该字段不能为空"):f(t,"")},T=s=>{let a;s&&typeof s=="object"&&"target"in s?a=s.target.value:a=s,c(t,a),l&&v()},b=()=>{E(t,!0),n&&v()},e=j.cloneElement(i,{value:d,onChange:T,onBlur:b}),r=()=>F?p.jsxs("label",{style:{display:"block",marginBottom:"8px",color:l&&R?"var(--error-color)":"var(--text-color)"},children:[F,n&&p.jsx("span",{style:{color:"var(--error-color)",marginLeft:"4px"},children:"*"})]}):null,o=()=>!R||!l?null:p.jsx("div",{style:{color:"var(--error-color)",fontSize:"12px",marginTop:"4px"},children:l});return p.jsxs("div",{style:{marginBottom:"16px"},children:[r(),e," ",o()]})};S.__docgenInfo={description:"",methods:[],displayName:"FormItem",props:{name:{required:!0,tsType:{name:"string"},description:""},label:{required:!1,tsType:{name:"string"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},children:{required:!0,tsType:{name:"ReactReactElement",raw:"React.ReactElement"},description:""}}};const w=({initialValues:t,onSubmit:F,children:n})=>{const[i,g]=u.useState(t||{}),[c,m]=u.useState({}),[f,x]=u.useState({}),[E,h]=u.useState({}),y=(e,r)=>{g(o=>{if(e in o)return o;const s=r!==void 0?r:t?.[e]!==void 0?t[e]:"";return{...o,[e]:s}})},d=(e,r)=>{h(o=>o[e]===r?o:{...o,[e]:r})},l=(e,r)=>{g({...i,[e]:r}),c[e]&&m({...c,[e]:""})},R=(e,r)=>{m({...c,[e]:r})},v=(e,r)=>{x({...f,[e]:r})},T=(e,r)=>E[e]&&(r==null||r==="")?"该字段不能为空":"",b=e=>{e.preventDefault();const r={};let o=!1;if(Object.keys(i).forEach(s=>{const a=T(s,i[s]);a&&(r[s]=a,o=!0)}),o){m(r);return}F(i,e)};return p.jsx(q.Provider,{value:{values:i,setFieldValue:l,errors:c,setFieldError:R,touched:f,setFieldTouched:v,registerField:y,registerRequired:d},children:p.jsx("form",{onSubmit:b,children:n})})};w.__docgenInfo={description:"",methods:[],displayName:"Form",props:{initialValues:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(values: FormValues, event?: React.FormEvent) => void",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},name:"values"},{type:{name:"ReactFormEvent",raw:"React.FormEvent"},name:"event"}],return:{name:"void"}}},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};export{w as F,S as a,q as b};
