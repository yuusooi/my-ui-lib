<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        Function.prototype.call = function (thisArg, ...args) {
            // 参数接收后,thisArg变成user,args变成[18]
            // fn = say函数
            // 当你是 testFunc.call(obj) 这样调用时
            // call 作为一个方法被 testFunc 调用
            // 所以 call 内部的 this 指向的就是 testFunc 本身（也就是我们要执行的那个函数）
            const fn = this
            thisArg = thisArg !== undefined && thisArg !== null
                ? Object(thisArg) : window
            const tag = Symbol("call")
            // 挂载后user变成类似：
            // {
            //     name: "Jack",
            //     [Symbol("call")]: say // 临时挂上去的
            // }
            thisArg[tag] = fn
            // 执行user[Symbol("call")](18)
            // 因为是user.调用，say内部的this指向user
            // args是数组，如果没传args，直接执行；传了就用扩展运算符展开
            let res
            if (args) {
                res = thisArg[tag](...args)
            } else {
                res = thisArg[tag]()
            }
            // 把Symbol("call")从user上删掉
            delete thisArg[tag]
            return res
        }

        // 举例理解，例子：
        // function say(age) {
        //   console.log(this.name + " is " + age);
        // }
        // const user = { name: "Jack" };

        // say.call(user, 18);
    </script>
</body>
</html>